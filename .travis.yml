language: php

php:
  - 7.2

cache:
  directories:
    - $HOME/.composer/cache
before_script:
  - composer install --optimize-autoloader --no-progress --ansi

script: ./vendor/bin/phpunit


jobs:
  include:
    - stage: test
      name: "phpunit"
      script: ./vendor/bin/phpunit

    - stage: test
      name: "code style"
      script: ./vendor/bin/php-cs-fixer fix src/ --dry-run --ansi

    - stage: test
      name: "code static analysis"
      script: ./vendor/bin/phpstan analyse --ansi
cache:
  directories:
    - $HOME/.composer/cache